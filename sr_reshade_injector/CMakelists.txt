cmake_minimum_required(VERSION 3.23)
project (srReshadeInjector VERSION 0.1)

add_executable(srReshadeInjector
src/main.cpp
)

set(srReshadeApi_DIR "../sr_reshade_api")
find_package(srReshadeApi REQUIRED)

set_target_properties(srReshadeInjector PROPERTIES LINKER_LANGUAGE CXX)
target_link_libraries(srReshadeInjector PRIVATE srReshadeApi)

add_custom_command(
    TARGET srReshadeInjector POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_if_different $<TARGET_RUNTIME_DLLS:srReshadeInjector> $<TARGET_FILE_DIR:srReshadeInjector>
    COMMAND_EXPAND_LISTS
)